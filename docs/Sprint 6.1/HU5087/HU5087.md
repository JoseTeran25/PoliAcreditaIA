# HU5087 - Iniciar Sesión en el Sistema

[← Volver al Sprint 6.1](../) | [← Volver al inicio](../../)

## 📋 Descripción de la Historia de Usuario

**Como** usuario de Poliacredita, **quiero** iniciar sesión en el sistema **para** acceder a mis funcionalidades y datos personales de manera segura.

## ✅ Estado: **Completado**

---

## 🎯 Criterios de Aceptación

- ✅ El sistema debe permitir a los usuarios ingresar sus credenciales (correo electrónico y contraseña) para autenticarse
- ✅ Las contraseñas deben ser almacenadas de forma segura utilizando técnicas de hashing
- ✅ El sistema debe generar y gestionar tokens de autenticación (JWT) para mantener la sesión del usuario
- ✅ Si las credenciales son incorrectas, el sistema debe devolver un mensaje de error adecuado
- ✅ El sistema debe validar el rol seleccionado para la autenticación, asegurando que solo los usuarios con roles permitidos puedan iniciar sesión

---

## 🔧 Tareas Técnicas Implementadas

| ID | Descripción | Estado |
|---|---|---|
| **5122** | Implementar hashing de contraseñas para asegurar que las contraseñas de los usuarios se almacenen de forma segura en la base de datos | ✅ |
| **5124** | Generar y gestionar tokens de autenticación (JWT) para permitir a los usuarios mantener su sesión activa después de iniciar sesión | ✅ |
| **5126** | Implementar la lógica de validación de credenciales, asegurando que se verifiquen correctamente el correo electrónico y la contraseña del usuario | ✅ |
| **5133** | Crear el endpoint `POST /auth/login` que permita a los usuarios enviar sus credenciales para iniciar sesión en el sistema | ✅ |
| **5136** | Validar el rol seleccionado para autenticación, asegurando que solo los usuarios con roles válidos puedan acceder al sistema | ✅ |

---

## 🏗️ Diagrama de Secuencia

![Diagrama de Secuencia - Login](HU5087.png)

*Diagrama que muestra el flujo completo del proceso de autenticación, desde la entrada de credenciales hasta la generación del token JWT.*

---

## 🔐 Componentes de Seguridad

### Autenticación JWT
- **Generación**: Tokens seguros con expiración configurable
- **Validación**: Verificación de integridad y vigencia del token
- **Roles**: Integración con sistema de autorización basado en roles

### Hashing de Contraseñas
- **Algoritmo**: Implementación segura de hashing
- **Salt**: Generación de salt único por contraseña
- **Verificación**: Comparación segura durante el login

### Validación de Entrada
- **Email**: Validación de formato y existencia
- **Contraseña**: Verificación contra hash almacenado
- **Rol**: Validación de permisos de acceso

---

## 📚 Recursos Relacionados

- **Endpoint**: `POST /auth/login`
- **Tecnologías**: JWT, Hashing, Validación de entrada
- **Roles involucrados**: Todos los usuarios del sistema

---

**Fecha de implementación**: Sprint 6.1  
**Última actualización**: Octubre 2025
