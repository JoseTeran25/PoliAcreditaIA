# HU5087 - Iniciar SesiÃ³n en el Sistema

[â† Volver al Sprint 6.1](../) | [â† Volver al inicio](../../)

## ğŸ“‹ DescripciÃ³n de la Historia de Usuario

**Como** usuario de Poliacredita, **quiero** iniciar sesiÃ³n en el sistema **para** acceder a mis funcionalidades y datos personales de manera segura.

## âœ… Estado: **Completado**

---

## ğŸ¯ Criterios de AceptaciÃ³n

- âœ… El sistema debe permitir a los usuarios ingresar sus credenciales (correo electrÃ³nico y contraseÃ±a) para autenticarse
- âœ… Las contraseÃ±as deben ser almacenadas de forma segura utilizando tÃ©cnicas de hashing
- âœ… El sistema debe generar y gestionar tokens de autenticaciÃ³n (JWT) para mantener la sesiÃ³n del usuario
- âœ… Si las credenciales son incorrectas, el sistema debe devolver un mensaje de error adecuado
- âœ… El sistema debe validar el rol seleccionado para la autenticaciÃ³n, asegurando que solo los usuarios con roles permitidos puedan iniciar sesiÃ³n

---

## ğŸ”§ Tareas TÃ©cnicas Implementadas

| ID | DescripciÃ³n | Estado |
|---|---|---|
| **5122** | Implementar hashing de contraseÃ±as para asegurar que las contraseÃ±as de los usuarios se almacenen de forma segura en la base de datos | âœ… |
| **5124** | Generar y gestionar tokens de autenticaciÃ³n (JWT) para permitir a los usuarios mantener su sesiÃ³n activa despuÃ©s de iniciar sesiÃ³n | âœ… |
| **5126** | Implementar la lÃ³gica de validaciÃ³n de credenciales, asegurando que se verifiquen correctamente el correo electrÃ³nico y la contraseÃ±a del usuario | âœ… |
| **5133** | Crear el endpoint `POST /auth/login` que permita a los usuarios enviar sus credenciales para iniciar sesiÃ³n en el sistema | âœ… |
| **5136** | Validar el rol seleccionado para autenticaciÃ³n, asegurando que solo los usuarios con roles vÃ¡lidos puedan acceder al sistema | âœ… |

---

## ğŸ—ï¸ Diagrama de Secuencia

![Diagrama de Secuencia - Login](HU5087.png)

*Diagrama que muestra el flujo completo del proceso de autenticaciÃ³n, desde la entrada de credenciales hasta la generaciÃ³n del token JWT.*

---

## ğŸ” Componentes de Seguridad

### AutenticaciÃ³n JWT
- **GeneraciÃ³n**: Tokens seguros con expiraciÃ³n configurable
- **ValidaciÃ³n**: VerificaciÃ³n de integridad y vigencia del token
- **Roles**: IntegraciÃ³n con sistema de autorizaciÃ³n basado en roles

### Hashing de ContraseÃ±as
- **Algoritmo**: ImplementaciÃ³n segura de hashing
- **Salt**: GeneraciÃ³n de salt Ãºnico por contraseÃ±a
- **VerificaciÃ³n**: ComparaciÃ³n segura durante el login

### ValidaciÃ³n de Entrada
- **Email**: ValidaciÃ³n de formato y existencia
- **ContraseÃ±a**: VerificaciÃ³n contra hash almacenado
- **Rol**: ValidaciÃ³n de permisos de acceso

---

## ğŸ“š Recursos Relacionados

- **Endpoint**: `POST /auth/login`
- **TecnologÃ­as**: JWT, Hashing, ValidaciÃ³n de entrada
- **Roles involucrados**: Todos los usuarios del sistema

---

**Fecha de implementaciÃ³n**: Sprint 6.1  
**Ãšltima actualizaciÃ³n**: Octubre 2025
