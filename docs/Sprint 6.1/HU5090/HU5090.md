# HU5090 - Listar Usuarios Registrados

[← Volver al Sprint 6.1](../) | [← Volver al inicio](../../)

## 📋 Descripción de la Historia de Usuario

**Como** administrador de Poliacredita, **quiero** listar los usuarios registrados en el sistema **para** poder gestionar sus cuentas y roles de manera efectiva.

## ✅ Estado: **Completado**

---

## 🎯 Criterios de Aceptación

- ✅ El sistema debe permitir al administrador acceder a una lista de todos los usuarios registrados, mostrando información relevante como correo electrónico, nombre, rol y estado
- ✅ La información debe ser accesible a través de un endpoint específico que devuelva los datos en un formato estructurado
- ✅ El acceso a este endpoint debe estar restringido solo a usuarios con rol de Administrador, asegurando que solo personal autorizado pueda ver la lista de usuarios

---

## 🔧 Tareas Técnicas Implementadas

| ID | Descripción | Estado |
|---|---|---|
| **5146** | Crear el endpoint `GET /usuarios` para permitir a los administradores listar los usuarios registrados en el sistema | ✅ |
| **5151** | Implementar la lógica para obtener datos de usuario, incluyendo email, nombre, rol y estado, asegurando que se consulten correctamente en la base de datos | ✅ |
| **5157** | Asegurar la protección del endpoint por rol de Administrador, implementando las validaciones necesarias para restringir el acceso a este recurso | ✅ |

---

## 🏗️ Diagrama de Secuencia

![Diagrama de Secuencia - Listar Usuarios](Diagrama%20.png)

*Diagrama que muestra el flujo del proceso para listar usuarios, incluyendo la validación de permisos administrativos y la consulta a la base de datos.*

---

## 📊 Información Mostrada

### Datos de Usuario
- **Email**: Dirección de correo electrónico del usuario
- **Nombre**: Nombre completo del usuario
- **Rol**: Rol asignado en el sistema (Administrador, Usuario, etc.)
- **Estado**: Estado actual del usuario (Activo, Inactivo, Suspendido)

### Formato de Respuesta
```json
{
  "usuarios": [
    {
      "id": "user_id",
      "email": "usuario@ejemplo.com",
      "nombre": "Nombre Usuario",
      "rol": "Administrador",
      "estado": "Activo"
    }
  ]
}
```

---

## 🔐 Seguridad y Permisos

### Control de Acceso
- **Restricción**: Solo usuarios con rol de **Administrador**
- **Validación**: Verificación de token JWT y permisos
- **Protección**: Endpoint protegido contra acceso no autorizado

### Validaciones Implementadas
- ✅ Autenticación de usuario válida
- ✅ Verificación de rol administrativo
- ✅ Token JWT válido y no expirado

---

## 📚 Recursos Relacionados

- **Endpoint**: `GET /usuarios`
- **Método HTTP**: GET
- **Autenticación**: Requerida (JWT)
- **Roles**: Solo Administrador
- **Respuesta**: Lista completa de usuarios del sistema

---

**Fecha de implementación**: Sprint 6.1  
**Última actualización**: Octubre 2025
